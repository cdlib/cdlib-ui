/***** Details Object *****/

/* The --details-summary-left-space variable used below is defined in _variables.scss and also used in _categories.scss to align the disclosure widget arrows and list items. */

details {
  margin-block-end: var(--space2);

  summary {
    display: flex;
    cursor: pointer;
    user-select: none;

    &::before {
      content: '';
      flex: none;
      block-size: calc(var(--details-summary-left-space) / 1.5);
      inline-size: calc(var(--details-summary-left-space) / 1.5);
      margin-inline: calc(var(--details-summary-left-space) / 6);
      background-color: var(--color-blue);
      mask-repeat: no-repeat;
      mask-size: 0.6rem;
      mask-position: left center;
      mask-image: url('data-url:npm:fa-solid/caret-right.svg');
    }

    /* remove default arrow in Safari: */

    &::-webkit-details-marker {
      display: none;
    }
  }

  summary:not(:has(a)) {
    color: var(--color-dark-red);
    font-weight: bold;
  }

  &[open] {
    summary {
      &::before {
        margin-inline: 0 calc(var(--details-summary-left-space) / 3);
        mask-size: 0.9rem;
        mask-image: url('data-url:npm:fa-solid/caret-down.svg');
      }
    }
  }

  /* Remove block margins, colors, font sizes and font weights from direct child elements of <summary>,
  like headings for example: <summary><h4>[text]</h4></summary>, except links.
  Applying "display: inline" is typically recommended for removing block margin but won't work
  here because of "display: flex" on <summary> on line 9 above. */

  summary > *:not(a) {
    margin-block: unset;
    color: unset;
    font-size: unset;
    font-weight: unset;
  }
}
